<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Documents and Indexes &#8212; OmMongo 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Field Types" href="fields.html" />
    <link rel="prev" title="Schema — Document-Object Mapper and Schema Definitions" href="index.html" />
     
    
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    
    

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Field Types"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Schema — Document-Object Mapper and Schema Definitions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">OmMongo 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >API documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Schema — Document-Object Mapper and Schema Definitions</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ommongo.document">
<span id="documents-and-indexes"></span><h1>Documents and Indexes<a class="headerlink" href="#module-ommongo.document" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ommongo.document.DocumentMeta">
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">DocumentMeta</code><a class="reference internal" href="../../_modules/ommongo/document.html#DocumentMeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.DocumentMeta" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ommongo.document.DocumentMeta.mro">
<code class="descname">mro</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; list<a class="headerlink" href="#ommongo.document.DocumentMeta.mro" title="Permalink to this definition">¶</a></dt>
<dd><p>return a type&#8217;s method resolution order</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ommongo.document.Document">
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">Document</code><span class="sig-paren">(</span><em>retrieved_fields=None</em>, <em>loading_from_db=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>retrieved_fields</strong> &#8211; The names of the fields returned when loading                 a partial object.  This argument should not be explicitly set                 by subclasses</li>
<li><strong>**kwargs</strong> &#8211; The values for all of the fields in the document.                 Any additional fields will raise a <code class="xref py py-class docutils literal"><span class="pre">ExtraValueException</span></code> and                 any missing (but required) fields will raise a <code class="xref py py-class docutils literal"><span class="pre">MissingValueException</span></code>.                 Both types of exceptions are subclasses of <code class="xref py py-class docutils literal"><span class="pre">DocumentException</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="ommongo.document.Document.mongo_id">
<code class="descname">mongo_id</code><a class="headerlink" href="#ommongo.document.Document.mongo_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Default field for the mongo object ID (<code class="docutils literal"><span class="pre">_id</span></code> in the database). This field
is automatically set on objects when they are saved into the database.
This field can be overridden in subclasses if the default ID is not
acceptable</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_namespace">
<code class="descname">config_namespace</code><em class="property"> = 'global'</em><a class="headerlink" href="#ommongo.document.Document.config_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>The namespace is used to determine how string class names should be
looked up.  If an instance of DocumentField is created using a string,
it will be looked up using the value of this variable and the string.
To have more than one namespace create a subclass of Document
overriding this class variable.  To turn off caching all together,
create a subclass where namespace is set to None.  Doing this will
disable using strings to look up document names, which will make
creating self-referencing documents impossible.  The default value is
&#8220;global&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_polymorphic">
<code class="descname">config_polymorphic</code><em class="property"> = None</em><a class="headerlink" href="#ommongo.document.Document.config_polymorphic" title="Permalink to this definition">¶</a></dt>
<dd><p>The variable to use when determining which class to instantiate a
database object with.  It is the name of an attribute which
will be used to decide the type of the object.  If you want more
control over which class is selected, you can override
<code class="docutils literal"><span class="pre">get_subclass</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_polymorphic_collection">
<code class="descname">config_polymorphic_collection</code><em class="property"> = False</em><a class="headerlink" href="#ommongo.document.Document.config_polymorphic_collection" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the base class collection name for the subclasses.  Default: False</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_polymorphic_identity">
<code class="descname">config_polymorphic_identity</code><em class="property"> = None</em><a class="headerlink" href="#ommongo.document.Document.config_polymorphic_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>When using a string value with <code class="docutils literal"><span class="pre">config_polymorphic_on</span></code> in a parent
class, this is the value that the attribute is compared to when
determining</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_full_name">
<code class="descname">config_full_name</code><em class="property"> = None</em><a class="headerlink" href="#ommongo.document.Document.config_full_name" title="Permalink to this definition">¶</a></dt>
<dd><p>If namespaces are being used, the key for a class is normally
the class name.  In some cases the same class name may be used in
different modules.  This field allows a longer unambiguous name
to be given.  It may also be used in error messages or string
representations of the class</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_default_sort">
<code class="descname">config_default_sort</code><em class="property"> = None</em><a class="headerlink" href="#ommongo.document.Document.config_default_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>The default sort to use when querying.  If set, this sort will be
applied to any query which a sort isn&#8217;t used on. The format is the
same as pymongo.  Example <code class="docutils literal"><span class="pre">[('foo',</span> <span class="pre">1),</span> <span class="pre">('bar',</span> <span class="pre">-1)]</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Document.config_extra_fields">
<code class="descname">config_extra_fields</code><em class="property"> = 'error'</em><a class="headerlink" href="#ommongo.document.Document.config_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls the method to use when dealing with fields passed in to the
document constructor.  Possible values are &#8216;error&#8217; and &#8216;ignore&#8217;. Any
fields which couldn&#8217;t be mapped can be retrieved (and edited) using
<a class="reference internal" href="#ommongo.document.Document.get_extra_fields" title="ommongo.document.Document.get_extra_fields"><code class="xref py py-func docutils literal"><span class="pre">get_extra_fields()</span></code></a></p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.add_subclass">
<em class="property">classmethod </em><code class="descname">add_subclass</code><span class="sig-paren">(</span><em>subclass</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.add_subclass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.add_subclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a subclass of this class.  Maps the subclass to the
value of subclass.config_polymorphic_identity if available.</p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.base_query">
<em class="property">classmethod </em><code class="descname">base_query</code><span class="sig-paren">(</span><em>exclude_subclasses=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.base_query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.base_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the base query for this kind of document. If this class is
not polymorphic, the query is empty. If it is polymorphic then
a filter is added to match only this class and its subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exclude_subclasses</strong> &#8211; If this is true, only match the current                 class. If it is false, the default, also return subclasses of                 this class.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.get_subclass">
<em class="property">classmethod </em><code class="descname">get_subclass</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_subclass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_subclass" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the subclass to use when instantiating a polymorphic object.
The default implementation looks at <code class="docutils literal"><span class="pre">cls.config_polymorphic</span></code>
to get the name of an attribute.  Subclasses automatically
register their value for that attribute on creation via their
<code class="docutils literal"><span class="pre">config_polymorphic_identity</span></code> field.  This process is then
repeated recursively until None is returned (indicating that the
current class is the correct one)</p>
<p>This method can be overridden to allow any method you would like
to use to select subclasses. It should return either the subclass
to use or None, if the original class should be used.</p>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Document.get_dirty_ops">
<code class="descname">get_dirty_ops</code><span class="sig-paren">(</span><em>with_required=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_dirty_ops"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_dirty_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict with the update operations necessary to make the
changes to this object to the database version.  It is mainly used
internally for <a class="reference internal" href="../session.html#ommongo.session.Session.update" title="ommongo.session.Session.update"><code class="xref py py-func docutils literal"><span class="pre">update()</span></code></a> but
may be useful for diagnostic purposes as well.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>with_required</strong> &#8211; Also include any field which is required.  This                 is useful if the method is being called for the purposes of                 an upsert where all required fields must always be sent.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Document.get_extra_fields">
<code class="descname">get_extra_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_extra_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_extra_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>if <a class="reference internal" href="#ommongo.document.Document.config_extra_fields" title="ommongo.document.Document.config_extra_fields"><code class="xref py py-attr docutils literal"><span class="pre">Document.config_extra_fields</span></code></a> is set to &#8216;ignore&#8217;, this method will return
a dictionary of the fields which couldn&#8217;t be mapped to the document.</p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.get_fields">
<em class="property">classmethod </em><code class="descname">get_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict mapping the names of the fields in a document
or subclass to the associated <a class="reference internal" href="fields.html#ommongo.fields.Field" title="ommongo.fields.Field"><code class="xref py py-class docutils literal"><span class="pre">Field</span></code></a></p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.class_name">
<em class="property">classmethod </em><code class="descname">class_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.class_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.class_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of the class. The name of the class is also the
default collection name.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ommongo.document.Document.get_collection_name" title="ommongo.document.Document.get_collection_name"><code class="xref py py-func docutils literal"><span class="pre">get_collection_name()</span></code></a></p>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.get_collection_name">
<em class="property">classmethod </em><code class="descname">get_collection_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_collection_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_collection_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the collection name used by the class.  If the <code class="docutils literal"><span class="pre">config_collection_name</span></code>
attribute is set it is used, otherwise the name of the class is used.</p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.get_indexes">
<em class="property">classmethod </em><code class="descname">get_indexes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.get_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all of the <a class="reference internal" href="#ommongo.document.Index" title="ommongo.document.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> instances
for the current class.</p>
</dd></dl>

<dl class="classmethod">
<dt id="ommongo.document.Document.transform_incoming">
<em class="property">classmethod </em><code class="descname">transform_incoming</code><span class="sig-paren">(</span><em>obj</em>, <em>session</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.transform_incoming"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.transform_incoming" title="Permalink to this definition">¶</a></dt>
<dd><p>Tranform the SON object into one which will be able to be
unwrapped by this document class.</p>
<p>This method is designed for schema migration systems.</p>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Document.has_id">
<code class="descname">has_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.has_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.has_id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ommongo.document.Document.to_ref">
<code class="descname">to_ref</code><span class="sig-paren">(</span><em>db=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.to_ref"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Document.to_ref" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ommongo.document.DictDoc">
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">DictDoc</code><a class="reference internal" href="../../_modules/ommongo/document.html#DictDoc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.DictDoc" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a mapping interface to a document.  Supports <code class="docutils literal"><span class="pre">__getitem__</span></code> and
<code class="docutils literal"><span class="pre">__contains__</span></code>.  Both methods will only retrieve values assigned to
a field, not methods or other attributes.</p>
<dl class="method">
<dt id="ommongo.document.DictDoc.setdefault">
<code class="descname">setdefault</code><span class="sig-paren">(</span><em>name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#DictDoc.setdefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.DictDoc.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><p>if the <code class="docutils literal"><span class="pre">name</span></code> is set, return its value.  Otherwse set <code class="docutils literal"><span class="pre">name</span></code> to
<code class="docutils literal"><span class="pre">value</span></code> and return <code class="docutils literal"><span class="pre">value</span></code></p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="ommongo.document.BadIndexException">
<em class="property">exception </em><code class="descclassname">ommongo.document.</code><code class="descname">BadIndexException</code><a class="reference internal" href="../../_modules/ommongo/document.html#BadIndexException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.BadIndexException" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ommongo.document.BadIndexException.with_traceback">
<code class="descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ommongo.document.BadIndexException.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) &#8211;
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ommongo.document.Index">
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">Index</code><a class="reference internal" href="../../_modules/ommongo/document.html#Index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index" title="Permalink to this definition">¶</a></dt>
<dd><p>This class is  used in the class definition of a <a class="reference internal" href="#ommongo.document.Document" title="ommongo.document.Document"><code class="xref py py-class docutils literal"><span class="pre">Document</span></code></a> to
specify a single, possibly compound, index.  <code class="docutils literal"><span class="pre">pymongo</span></code>&#8216;s <code class="docutils literal"><span class="pre">ensure_index</span></code>
will be called on each index before a database operation is executed
on the owner document class.</p>
<p><strong>Example</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Donor</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">age</span> <span class="o">=</span> <span class="n">IntField</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">blood_type</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">i_name</span> <span class="o">=</span> <span class="n">Index</span><span class="p">()</span><span class="o">.</span><span class="n">ascending</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">type_age</span> <span class="o">=</span> <span class="n">Index</span><span class="p">()</span><span class="o">.</span><span class="n">ascending</span><span class="p">(</span><span class="s1">&#39;blood_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">descending</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="ommongo.document.Index.ASCENDING">
<code class="descname">ASCENDING</code><em class="property"> = 1</em><a class="headerlink" href="#ommongo.document.Index.ASCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ommongo.document.Index.DESCENDING">
<code class="descname">DESCENDING</code><em class="property"> = -1</em><a class="headerlink" href="#ommongo.document.Index.DESCENDING" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.expire">
<code class="descname">expire</code><span class="sig-paren">(</span><em>after</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.expire"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.expire" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an expire after option to the index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">after: Number of second before expiration</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.ascending">
<code class="descname">ascending</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.ascending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.ascending" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a descending index for <code class="docutils literal"><span class="pre">name</span></code> to this index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; Name to be used in the index</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.descending">
<code class="descname">descending</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.descending"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.descending" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a descending index for <code class="docutils literal"><span class="pre">name</span></code> to this index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; Name to be used in the index</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.geo2d">
<code class="descname">geo2d</code><span class="sig-paren">(</span><em>name</em>, <em>min=None</em>, <em>max=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.geo2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.geo2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a 2d index.  See:
<a class="reference external" href="http://www.mongodb.org/display/DOCS/Geospatial+Indexing">http://www.mongodb.org/display/DOCS/Geospatial+Indexing</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the indexed column</li>
<li><strong>min</strong> &#8211; minimum value for the index</li>
<li><strong>max</strong> &#8211; minimum value for the index</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.geo_haystack">
<code class="descname">geo_haystack</code><span class="sig-paren">(</span><em>name</em>, <em>bucket_size</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.geo_haystack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.geo_haystack" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Haystack index.  See:
<a class="reference external" href="http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing">http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the indexed column</li>
<li><strong>bucket_size</strong> &#8211; Size of the haystack buckets (see mongo docs)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.unique">
<code class="descname">unique</code><span class="sig-paren">(</span><em>drop_dups=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.unique"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Make this index unique, optionally dropping duplicate entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>drop_dups</strong> &#8211; Drop duplicate objects while creating the unique                 index?  Default to <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ommongo.document.Index.ensure">
<code class="descname">ensure</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.ensure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Index.ensure" title="Permalink to this definition">¶</a></dt>
<dd><p>Call the pymongo method <code class="docutils literal"><span class="pre">ensure_index</span></code> on the passed collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collection</strong> &#8211; the <code class="docutils literal"><span class="pre">pymongo</span></code> collection to ensure this index                     is on</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ommongo.document.Value">
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">Value</code><span class="sig-paren">(</span><em>field</em>, <em>document</em>, <em>from_db=False</em>, <em>extra=False</em>, <em>retrieved=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Value" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ommongo.document.Value.clear_dirty">
<code class="descname">clear_dirty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Value.clear_dirty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Value.clear_dirty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ommongo.document.Value.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Value.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ommongo.document.Value.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<div class="section" id="document">
<h2><a class="reference internal" href="#ommongo.document.Document" title="ommongo.document.Document"><code class="xref py py-class docutils literal"><span class="pre">Document</span></code></a><a class="headerlink" href="#document" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">Document</code><span class="sig-paren">(</span><em>retrieved_fields=None</em>, <em>loading_from_db=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>retrieved_fields</strong> &#8211; The names of the fields returned when loading                 a partial object.  This argument should not be explicitly set                 by subclasses</li>
<li><strong>**kwargs</strong> &#8211; The values for all of the fields in the document.                 Any additional fields will raise a <code class="xref py py-class docutils literal"><span class="pre">ExtraValueException</span></code> and                 any missing (but required) fields will raise a <code class="xref py py-class docutils literal"><span class="pre">MissingValueException</span></code>.                 Both types of exceptions are subclasses of <code class="xref py py-class docutils literal"><span class="pre">DocumentException</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt>
<code class="descname">mongo_id</code></dt>
<dd><p>Default field for the mongo object ID (<code class="docutils literal"><span class="pre">_id</span></code> in the database). This field
is automatically set on objects when they are saved into the database.
This field can be overridden in subclasses if the default ID is not
acceptable</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_namespace</code><em class="property"> = 'global'</em></dt>
<dd><p>The namespace is used to determine how string class names should be
looked up.  If an instance of DocumentField is created using a string,
it will be looked up using the value of this variable and the string.
To have more than one namespace create a subclass of Document
overriding this class variable.  To turn off caching all together,
create a subclass where namespace is set to None.  Doing this will
disable using strings to look up document names, which will make
creating self-referencing documents impossible.  The default value is
&#8220;global&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_polymorphic</code><em class="property"> = None</em></dt>
<dd><p>The variable to use when determining which class to instantiate a
database object with.  It is the name of an attribute which
will be used to decide the type of the object.  If you want more
control over which class is selected, you can override
<code class="docutils literal"><span class="pre">get_subclass</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_polymorphic_collection</code><em class="property"> = False</em></dt>
<dd><p>Use the base class collection name for the subclasses.  Default: False</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_polymorphic_identity</code><em class="property"> = None</em></dt>
<dd><p>When using a string value with <code class="docutils literal"><span class="pre">config_polymorphic_on</span></code> in a parent
class, this is the value that the attribute is compared to when
determining</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_full_name</code><em class="property"> = None</em></dt>
<dd><p>If namespaces are being used, the key for a class is normally
the class name.  In some cases the same class name may be used in
different modules.  This field allows a longer unambiguous name
to be given.  It may also be used in error messages or string
representations of the class</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_default_sort</code><em class="property"> = None</em></dt>
<dd><p>The default sort to use when querying.  If set, this sort will be
applied to any query which a sort isn&#8217;t used on. The format is the
same as pymongo.  Example <code class="docutils literal"><span class="pre">[('foo',</span> <span class="pre">1),</span> <span class="pre">('bar',</span> <span class="pre">-1)]</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">config_extra_fields</code><em class="property"> = 'error'</em></dt>
<dd><p>Controls the method to use when dealing with fields passed in to the
document constructor.  Possible values are &#8216;error&#8217; and &#8216;ignore&#8217;. Any
fields which couldn&#8217;t be mapped can be retrieved (and edited) using
<a class="reference internal" href="#ommongo.document.Document.get_extra_fields" title="ommongo.document.Document.get_extra_fields"><code class="xref py py-func docutils literal"><span class="pre">get_extra_fields()</span></code></a></p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">add_subclass</code><span class="sig-paren">(</span><em>subclass</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.add_subclass"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Register a subclass of this class.  Maps the subclass to the
value of subclass.config_polymorphic_identity if available.</p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">base_query</code><span class="sig-paren">(</span><em>exclude_subclasses=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.base_query"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return the base query for this kind of document. If this class is
not polymorphic, the query is empty. If it is polymorphic then
a filter is added to match only this class and its subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exclude_subclasses</strong> &#8211; If this is true, only match the current                 class. If it is false, the default, also return subclasses of                 this class.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">get_subclass</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_subclass"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Get the subclass to use when instantiating a polymorphic object.
The default implementation looks at <code class="docutils literal"><span class="pre">cls.config_polymorphic</span></code>
to get the name of an attribute.  Subclasses automatically
register their value for that attribute on creation via their
<code class="docutils literal"><span class="pre">config_polymorphic_identity</span></code> field.  This process is then
repeated recursively until None is returned (indicating that the
current class is the correct one)</p>
<p>This method can be overridden to allow any method you would like
to use to select subclasses. It should return either the subclass
to use or None, if the original class should be used.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_dirty_ops</code><span class="sig-paren">(</span><em>with_required=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_dirty_ops"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns a dict with the update operations necessary to make the
changes to this object to the database version.  It is mainly used
internally for <a class="reference internal" href="../session.html#ommongo.session.Session.update" title="ommongo.session.Session.update"><code class="xref py py-func docutils literal"><span class="pre">update()</span></code></a> but
may be useful for diagnostic purposes as well.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>with_required</strong> &#8211; Also include any field which is required.  This                 is useful if the method is being called for the purposes of                 an upsert where all required fields must always be sent.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">get_extra_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_extra_fields"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>if <a class="reference internal" href="#ommongo.document.Document.config_extra_fields" title="ommongo.document.Document.config_extra_fields"><code class="xref py py-attr docutils literal"><span class="pre">Document.config_extra_fields</span></code></a> is set to &#8216;ignore&#8217;, this method will return
a dictionary of the fields which couldn&#8217;t be mapped to the document.</p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">get_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_fields"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns a dict mapping the names of the fields in a document
or subclass to the associated <a class="reference internal" href="fields.html#ommongo.fields.Field" title="ommongo.fields.Field"><code class="xref py py-class docutils literal"><span class="pre">Field</span></code></a></p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">class_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.class_name"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the name of the class. The name of the class is also the
default collection name.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ommongo.document.Document.get_collection_name" title="ommongo.document.Document.get_collection_name"><code class="xref py py-func docutils literal"><span class="pre">get_collection_name()</span></code></a></p>
</div>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">get_collection_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_collection_name"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns the collection name used by the class.  If the <code class="docutils literal"><span class="pre">config_collection_name</span></code>
attribute is set it is used, otherwise the name of the class is used.</p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">get_indexes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.get_indexes"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Returns all of the <a class="reference internal" href="#ommongo.document.Index" title="ommongo.document.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a> instances
for the current class.</p>
</dd></dl>

<dl class="classmethod">
<dt>
<em class="property">classmethod </em><code class="descname">transform_incoming</code><span class="sig-paren">(</span><em>obj</em>, <em>session</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.transform_incoming"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Tranform the SON object into one which will be able to be
unwrapped by this document class.</p>
<p>This method is designed for schema migration systems.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">has_id</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.has_id"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">to_ref</code><span class="sig-paren">(</span><em>db=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Document.to_ref"><span class="viewcode-link">[source]</span></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="index">
<h2><a class="reference internal" href="#ommongo.document.Index" title="ommongo.document.Index"><code class="xref py py-class docutils literal"><span class="pre">Index</span></code></a><a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">ommongo.document.</code><code class="descname">Index</code><a class="reference internal" href="../../_modules/ommongo/document.html#Index"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>This class is  used in the class definition of a <a class="reference internal" href="#ommongo.document.Document" title="ommongo.document.Document"><code class="xref py py-class docutils literal"><span class="pre">Document</span></code></a> to
specify a single, possibly compound, index.  <code class="docutils literal"><span class="pre">pymongo</span></code>&#8216;s <code class="docutils literal"><span class="pre">ensure_index</span></code>
will be called on each index before a database operation is executed
on the owner document class.</p>
<p><strong>Example</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Donor</span><span class="p">(</span><span class="n">Document</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">name</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">age</span> <span class="o">=</span> <span class="n">IntField</span><span class="p">(</span><span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">blood_type</span> <span class="o">=</span> <span class="n">StringField</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="n">i_name</span> <span class="o">=</span> <span class="n">Index</span><span class="p">()</span><span class="o">.</span><span class="n">ascending</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">type_age</span> <span class="o">=</span> <span class="n">Index</span><span class="p">()</span><span class="o">.</span><span class="n">ascending</span><span class="p">(</span><span class="s1">&#39;blood_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">descending</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt>
<code class="descname">ASCENDING</code><em class="property"> = 1</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">DESCENDING</code><em class="property"> = -1</em></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">expire</code><span class="sig-paren">(</span><em>after</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.expire"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add an expire after option to the index</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">after: Number of second before expiration</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">ascending</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.ascending"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add a descending index for <code class="docutils literal"><span class="pre">name</span></code> to this index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; Name to be used in the index</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">descending</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.descending"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Add a descending index for <code class="docutils literal"><span class="pre">name</span></code> to this index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; Name to be used in the index</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">geo2d</code><span class="sig-paren">(</span><em>name</em>, <em>min=None</em>, <em>max=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.geo2d"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a 2d index.  See:
<a class="reference external" href="http://www.mongodb.org/display/DOCS/Geospatial+Indexing">http://www.mongodb.org/display/DOCS/Geospatial+Indexing</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the indexed column</li>
<li><strong>min</strong> &#8211; minimum value for the index</li>
<li><strong>max</strong> &#8211; minimum value for the index</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">geo_haystack</code><span class="sig-paren">(</span><em>name</em>, <em>bucket_size</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.geo_haystack"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Create a Haystack index.  See:
<a class="reference external" href="http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing">http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of the indexed column</li>
<li><strong>bucket_size</strong> &#8211; Size of the haystack buckets (see mongo docs)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">unique</code><span class="sig-paren">(</span><em>drop_dups=False</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.unique"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Make this index unique, optionally dropping duplicate entries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>drop_dups</strong> &#8211; Drop duplicate objects while creating the unique                 index?  Default to <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">ensure</code><span class="sig-paren">(</span><em>collection</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/ommongo/document.html#Index.ensure"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Call the pymongo method <code class="docutils literal"><span class="pre">ensure_index</span></code> on the passed collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>collection</strong> &#8211; the <code class="docutils literal"><span class="pre">pymongo</span></code> collection to ensure this index                     is on</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Documents and Indexes</a><ul>
<li><a class="reference internal" href="#document"><code class="docutils literal"><span class="pre">Document</span></code></a></li>
<li><a class="reference internal" href="#index"><code class="docutils literal"><span class="pre">Index</span></code></a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">API documentation</a><ul>
  <li><a href="index.html">Schema — Document-Object Mapper and Schema Definitions</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Schema — Document-Object Mapper and Schema Definitions</a></li>
      <li>Next: <a href="fields.html" title="next chapter">Field Types</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/api/schema/document.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Bapakode Open Source.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.3.
    </div>
    

  </body>
</html>